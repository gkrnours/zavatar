var c = require("./client.js")

this.create = function create(data, cb){
	c.d.get("menu", function(err, doc){
		if(err && err.error == "not_found"){
			c.d.save("menu", {"type": "menu", "pages":[]}, function(err, doc){
				if(err) return c.l.error(JSON.stringify(err))
				return create(data, cb)
			})
		} else if(err) return c.l.error(JSON.stringify(err))
		else{
			doc.pages.push(data)
			c.d.save(doc)
			cb()
		}
	})
}

this.read = function read(what, cb){
	if(!what) what = "list"
	return c.d.view("menu/"+what, cb)
}
this.update = function update(data, cb){
	c.d.merge("menu", data, cb)
}
this.destroy = function destroy(){}

